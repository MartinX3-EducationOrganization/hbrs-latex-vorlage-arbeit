%! Package = hbrs-inf
%! Author = martin
%! Date = 18.01.22

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{aussehen/hbrs-inf}[2022/01/18 hbrs-inf theming Package]

\RequirePackage{graphicx}
\usepackage[usenames]{xcolor}
\RequirePackage{svg}
\RequirePackage{datetime}
\RequirePackage{fontspec}
\setlength{\headheight}{1.3\baselineskip}

\RequirePackage{hyperref}

% Metadaten der PDF-Datei setzen
\hypersetup{
    pdftitle={\ThesisTitle},
    pdfsubject={\ThesisSubject},
    pdfauthor={\ThesisAuthor},
    pdfcreator={LuaLaTeX},
    pdfkeywords={\ThesisKeywords}
}

% Links anklickbar machen
\definecolor{darkblue}{rgb}{0,0,0.5}
\hypersetup{
    colorlinks = true,
    linkcolor = black,
    urlcolor = black,
    citecolor = black,
    breaklinks = true,
}

% Abkürzungsverzeichnis (muss vor ngerman stehen)
\usepackage[acronym, toc]{glossaries-extra}
\makeglossaries
\loadglsentries{datenbanken/Abkuerzungsverzeichnis.tex}

% Deutsch und passende Seitenränder
\usepackage[ngerman]{babel,isodate}
\RequirePackage{csquotes}
\usepackage[paper=a4paper,left=40mm,right=20mm,top=25mm,bottom=10mm]{geometry}
\setlength{\footskip}{6mm} % Abstand Seitenzahl zu Text

%% Literatur
% Zitate
\RequirePackage{hypernat}

% Literaturverzeichnis nach ISO 690 (Nachfolger von DIN 1505)
% Further help at https://github.com/michal-h21/biblatex-iso690
\usepackage[style=iso-authoryear]{biblatex}
\addbibresource{datenbanken/Literaturverzeichnis.bib}

\clubpenalty=10000 % schliesst Schusterjungen aus
\widowpenalty=10000 % schliesst Hurenkinder aus

\RequirePackage{setspace}

\parskip0.5ex % parskip auf font/2
\parindent0ex % kein Einzug am Absatzbeginn

\RedeclareSectionCommand[beforeskip=12pt,afterskip=5pt]{section}
\RedeclareSectionCommand[beforeskip=11pt,afterskip=5pt]{subsection}
\RedeclareSectionCommand[beforeskip=11pt,afterskip=5pt]{subsubsection}
\RedeclareSectionCommand[beforeskip=11pt,afterskip=0pt]{paragraph}

% Kopfzeile und Fußzeile default
\RequirePackage{lastpage}
\usepackage[automark]{scrlayer-scrpage}
\pagestyle{scrheadings}
\clearmainofpairofpagestyles
\addtokomafont{pageheadfoot}{\upshape}

% Kopfzeile und Fußzeile definiert für Seiten zwischen Deckblatt und dem Hauptteil
\newpagestyle{bisHauptteil}{
        {\hfill}
        {\hfill}
        {\ThesisTitle\hfill}
}
{
        {\hfill}
        {\hfill}
        {\hfill\pagemark}
}

\newpagestyle{Hauptteil}{
        {\hfill}
        {\hfill}
        {\ThesisTitle\hfill}
}
{
        {\hfill}
        {\hfill}
        {\hfill\ \pagemark}
}


% Quellcode einfuegen und highlighten
\RequirePackage{listings}
\definecolor{light-gray}{gray}{0.80}
\lstset{numbers=left, numberstyle=\tiny, numbersep=5pt,showstringspaces=false}
\lstset{basicstyle=\ttfamily\small,commentstyle=\itshape,backgroundcolor=\color{light-gray}}
\lstset{captionpos=b,extendedchars=true,inputencoding=utf8,breaklines=true,language=C++}

% Gantt-Diagramm unterstützung
\RequirePackage{pgfgantt}

% versucht, Umbrueche zu erzwingen, auch wenn es zu Lasten
% des Schriftbildes geht. Hier gewaehlt, damit auf keinen Fall
% Woerter im Blocksatz ueber den Rand laufen.
\tolerance 9999


%%%%%%%%
%Makros
%%%%%%%%

% Figure Item, Caption, label
\newcommand{\fhbrsfigure}[3]{
    \begin{figure}[h]
        #1
        \caption{#2}\label{fig:#3}
    \end{figure}
}

% Graphicsname, Caption, width, label
\newcommand{\fhbrsgraphics}[4]{
    \begin{figure}[h]
        \begin{center}
            \includegraphics[width=#3]{img/#1}
        \end{center}
        \caption{#2}\label{fig:#4}
    \end{figure}
}

% pos, Caption, Columns
\newenvironment{fhbrstable}[3]{
    \begin{table}[#1]
        \caption{#3}
        \begin{tabular*}{\textwidth}{#2}
            \label{tab:table}
        \end{tabular*}
    \end{table}
}

\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\module}[1]{\texttt{#1}}

\newcommand{\introterm}[1]{\emph{#1}}

% Name, Comment
\newcommand{\introglosterm}[2]{
    \xglossary{name={#1},description={#2}}{\emph{#1}}
}

\newcommand{\introglostermshort}[3]{
    \xglossary{name={#1},description={#2.\\#3}}{#1 (\emph{#2})}
}

% Text
\newcommand{\todo}[1]{
    \begin{itemize}
        \color{red}{\item#1}
    \end{itemize}
}
