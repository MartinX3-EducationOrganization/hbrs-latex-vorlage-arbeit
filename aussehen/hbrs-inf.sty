\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{aussehen/hbrs-inf}[2022/01/23 hbrs-inf theming Package]

% Enable the arial font
\RequirePackage{fontspec}
\setmainfont{Arial} % If an error tells you, that this font can't be found, please install it on your computer.

\RequirePackage{graphicx}
\usepackage[usenames]{xcolor}
\RequirePackage{svg}
\RequirePackage{datetime}

\RequirePackage{hyperref}

% Metadaten der PDF-Datei setzen
\hypersetup{
    pdftitle={\ThesisTitle},
    pdfsubject={\ThesisSubject},
    pdfauthor={\ThesisAuthor},
    pdfcreator={LuaLaTeX},
    pdfkeywords={\ThesisKeywords}
}

% Links anklickbar machen
\definecolor{darkblue}{rgb}{0, 0, 0.5}
\hypersetup{
    colorlinks = true,
    linkcolor = black,
    urlcolor = black,
    citecolor = black,
    breaklinks = true
}

% Abkürzungsverzeichnis (muss vor ngerman stehen)
\usepackage[acronym, nomain, toc]{glossaries-extra}
\makeglossaries
\loadglsentries{datenbanken/Abkuerzungsverzeichnis}

% Deutsch
\usepackage[ngerman]{babel}
\usepackage[ngerman]{isodate}

% Seitenränder
\usepackage[paper=a4paper, left=40mm, right=20mm, top=25mm, bottom=10mm]{geometry}

%% Literatur
% Zitate
\RequirePackage{csquotes}
\RequirePackage{hypernat}

% Literaturverzeichnis nach ISO 690 (Nachfolger von DIN 1505)
% Further help at https://github.com/michal-h21/biblatex-iso690
\usepackage[style=iso-authortitle]{biblatex}
\addbibresource{datenbanken/Literaturverzeichnis.bib}
\KOMAoptions{bibliography=totocnumbered}

% Abbildungsvereichnis im Inhaltsvereichnis auflisten
\KOMAoptions{listof=totoc}

% Zeilenabstand
\RequirePackage[singlespacing]{setspace}

% Schriftgrößen
\RedeclareSectionCommand[
    afterskip=-2pt,
    beforeskip=3pt
]{chapter}
\setkomafont{chapter}{\large}
\RedeclareSectionCommand[
    afterskip=0pt,
    beforeskip=4pt,
    runin=false,
]{section}
\setkomafont{section}{\normalsize}
\RedeclareSectionCommand[
    afterskip=0pt,
    beforeskip=3pt,
    runin=false
]{subsection}
\setkomafont{subsection}{\normalsize}
\setkomafont{subsubsection}{\normalsize}
\setkomafont{caption}{\small}

% Absatz
\KOMAoptions{parskip=half}

% Kopfzeile und Fußzeile
\usepackage[headsepline, plainheadsepline]{scrlayer-scrpage}
\pagestyle{scrheadings}
\clearpairofpagestyles
\addtokomafont{pagehead}{\small\normalfont}
\ihead*{\ThesisTitle}
\ofoot*{\pagemark}

% Quellcode einfügen und highlighten
\RequirePackage{listings}
\definecolor{light-gray}{gray}{0.80}
\lstset{numbers=left, numberstyle=\tiny, numbersep=5pt,showstringspaces=false}
\lstset{basicstyle=\ttfamily\small, commentstyle=\itshape, backgroundcolor=\color{light-gray}}
\lstset{captionpos=b, extendedchars=true, inputencoding=utf8, breaklines=true, language=C++}

% Gantt-Diagramme
\RequirePackage{pgfgantt}

% TODO Workaround if an texlive version older than 2021 is used, like in github actions. The file gets added by github-actions.
% To-dos
\IfFileExists{aussehen/snaptodo.sty}{\RequirePackage{aussehen/snaptodo}}{\RequirePackage{snaptodo}}
% Zwingt die To-dos auf die linke Seite.
% Standardmäßig sind dese links oder rechts am Rand, je nachdem, wo die markierung im Text in Relation zur Blattmitte ist.
% Da aber Universitäten seltsame formale Anforderungen haben, statt Standards zu nutzen, was in der TeX-Gesellschaft kritisiert wird, benötigen wir diesen Workaround.
\snaptodoset{chain bias=-99in}
